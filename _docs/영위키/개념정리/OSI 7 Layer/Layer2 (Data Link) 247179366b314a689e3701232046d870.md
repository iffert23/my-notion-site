# Layer2 (Data Link)

---

- **참고**
    - **이 때 실행되는 프로토콜 : [ARP](Layer3%20(Network)/ARP%20e04b1eb55b0b4f979cbee3611a676f7a.md)**
    - [**https://bannavi.tistory.com/147**](https://bannavi.tistory.com/147)
    - [**https://bannavi.tistory.com/146?category=878309**](https://bannavi.tistory.com/146?category=878309)
- Data Link 계층
    - OSI 7Layer의 2계층
    - 인접한 네트워크 노드끼리 데이터를 전송하는 기능과 절차 제공
    - 물리계층에서 발생할 수 있는 오류감지 및 수정
    - 대표적인 프로토콜 : [Ethernet](Layer2%20(Data%20Link)/Ethernet%2005aeacf5fc184161a8ad19adbc19dd9f.md)
    - 2개의 부 계층으로 구성됨
        - LLC : 로컬 링크 컨트롤, Frame 만들고 3계층과 연결
            - 서로 통신 시 동일한 Frame 단위로 전송하다가 3계층 통신 시 Packet단위 됨
        - MAC : 물리적인 부분. 매체간의 연결방식 제어, 1계층과 연결
- L2 Switch
    - 허브의 단점을 보완 → Full Duplex 가능
    - 일반 Collision Domain → 포트별 Collision Domain
    - 포트별로 나눠서 해당 도메인에 대해서만 통신하고 불필요한 패킷에는 보내지 않게 됨
    - 라우팅 기능 없음 → 라우팅 가능한 스위치는 L3스위치임
        - 스위치의 동작방식
            - **Learning(학습)**
                1. 출발지 주소가 MAC 주소 테이블에 없으면 주소를 저장
                2. 자신의 스위치에 연결되어 있는 서버나 컴퓨터의 정보 수집
                3. PC는 스위치의 각 포트에 연결되고, 프레임이 스위치에 전달됨
                4. 스위치는 해당 포트로 유입된 프레임을 보고 MAC주소를 테이블에 저장
            - **Flooding-Broadcasting**
                1. 목적지 주소가 MAC 주소 테이블에 없으면 전체 포트로 전달하는 것
                2. PC1 : X.X.X.X 찾아요~ → 내 MAC주소 테이블에 없음 → 스위치 : X.X.X.X 누구야? (라고 여기저기에 물어보기)
            - **Forwarding**
                1. 목적지 주소가 MAC주소 테이블에 있으면 해당 포트로 전달
                2. PC1 X.X.X.X로 갈거에요→ MAC주소 테이블에 있네? → PC5에 전달
            - **Filtering-Colision Domain**
                1. 출발지와 목적지가 같은 네트워크 영역에 있으면 다른 네트워크로 전달X
                2. PC1: 목적지로 프레임 전달 → 스위치 : 같은 네트워크네? 다른 포트로는 전달안해야지
                3. 필터링 : 각 포트별 Collision Domain을 나눠서 효율적 통신 가능
            - **Aging**
                1. MAC 주소 테이블은 시간이 지나면 삭제됨
                2. 삭제되는 이유
                    - 테이블 저장 공간을 효율적으로 사용하기 위함
                    - 해당 포트에 연결된 PC가 다른 포트에 옮겨진 경우도 발생
                3. 기본 300초(Cisco 기준) 저장, 다시 프레임 발생 시 다시 카운트
                4. 만약 MAC 테이블에 있던 정보라면 기본 300초로 다시 재시작(refresh)

- **관련 문서**
    
    [Ethernet](Layer2%20(Data%20Link)/Ethernet%2005aeacf5fc184161a8ad19adbc19dd9f.md)
    
    [VLAN](Layer2%20(Data%20Link)/VLAN%204a52cba68dfc471481a49a74f7c986cd.md)
    
    [STP (Spanning Tree Protocol)](Layer2%20(Data%20Link)/STP%20(Spanning%20Tree%20Protocol)%20c37a2ae6e0394921b6d3b9c7c535b94d.md)