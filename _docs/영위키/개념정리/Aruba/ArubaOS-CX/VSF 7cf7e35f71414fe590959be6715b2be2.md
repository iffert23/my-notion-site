# VSF

---

[Overview of VSF](https://www.arubanetworks.com/techdocs/AOS-S/16.11/MCG/WC/content/wc/ove-vsf.htm)

vsf 매뉴얼 : [https://techhub.hpe.com/eginfolib/Aruba/OS-CX_10.04/5200-6790/index.html#GUID-D6EF042E-EEEF-49F7-B67E-4CAC41CCB24D.html](https://techhub.hpe.com/eginfolib/Aruba/OS-CX_10.04/5200-6790/index.html#GUID-D6EF042E-EEEF-49F7-B67E-4CAC41CCB24D.html)

구조 : Master, Standby, Member 역할로 구분

운영
모든 스택 구성 스위치는 동일 이미지에서 구성

마스터 업그레이드 시 모든 스택 스위치 동시 업그레이드
스택 구성 시 스위치 이미지와 마스터 이미지가 상이할 경우 마스터 이미지로 자동 업그레이드

---

Role
Master : 모든 스위치의 프로토콜 운영
Standby : Master 장애 극복을 위한 switchd 데몬을 wait모드에서 운영
Member :  스택 내의 Master & Standby 이외 모든 스위치

---

스택 생성 및 lag Config

<lag 1 생성, vsf 스택 이중화, 포트는 23, 24번 포트 사용 시>

**[master장비]**
`conf t
vsf member 1
link 1 1/1/23
link 2 1/1/24`

`interface lag 1
no shutdown
vlan interface native 1
vlan trunk allowed all

interface 1/1/23
lag 1
interface 1/1/24
lag 1

interface 2/1/23`                         //member 2 lag설정
`lag 1
interface 2/1/24
lag 2`

standby(member) 장비에서만 추가설정 : `vsf renumber-to [member number]`

**[member장비]**
`configure
vsf member 2
link 1 1/1/25
link 2 1/1/24`                           //이중화 필요 시

---

`vsf member 1` ← 해당 장비 member number.
member 1은 무조건 master장비가 됨, 2~8 까지의 번호를 할당해야 member 또는 standby role이 됨

`link 1 1/1/n` ← 타 장비와 연결된 포트 interface (무조건 10G로 스택 구성)

스택 연결 시 글로벌 상태 LED가 빨간색으로 깜빡거릴 때 케이블 결선.

마스터 장비 CLI 연결된 상태로 ‘`show vsf`’ 명령어 입력하면 스택 연결상태 확인 가능

스위치 장비 LED 정보 : [https://www.arubanetworks.com/techdocs/AOS-CX/10.08/HTML/monitoring_6200/Content/Chp_LEDs/swi-por-led-ml.htm](https://www.arubanetworks.com/techdocs/AOS-CX/10.08/HTML/monitoring_6200/Content/Chp_LEDs/swi-por-led-ml.htm)